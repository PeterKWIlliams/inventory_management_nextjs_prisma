// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model User {
  id         Int          @id @default(autoincrement())
  email      String       @unique
  name       String?
  address    address      @relation(fields: [addressId], references: [id])
  addressId  Int
  management management[]

  @@index([addressId])
}

model household {
  id               Int                @id @default(autoincrement())
  name             String
  address          address            @relation(fields: [addressId], references: [id])
  management       management[]
  addressId        Int
  storage_location storage_location[]

  @@index([addressId])
}

model management {
  id           Int       @id @default(autoincrement())
  user         User      @relation(fields: [userId], references: [id])
  house_hold   household @relation(fields: [house_holdId], references: [id])
  userId       Int
  house_holdId Int

  @@index([house_holdId])
  @@index([userId])
}

model address {
  id        Int         @id @default(autoincrement())
  street    String
  city      String
  postcode  String
  household household[]
  User      User[]
}

model storage_location {
  id           Int            @id @default(autoincrement())
  name         String
  address      String
  house_hold   household      @relation(fields: [house_holdId], references: [id])
  house_holdId Int
  stored_items stored_items[]

  @@index([house_holdId])
}

model stored_items {
  id                 Int              @id @default(autoincrement())
  name               String
  expiry_date        DateTime
  purchase_date      DateTime
  purchase_link      String
  image_url          String
  desired_quantity   Int
  quantity           Int
  storage_location   storage_location @relation(fields: [storage_locationId], references: [id])
  storage_locationId Int

  @@index([storage_locationId])
}

model distributor {
  id      Int    @id @default(autoincrement())
  name    String
  address String
  item    item[]
}

model item {
  id            Int          @id @default(autoincrement())
  name          String
  puchaase_link String
  image_url     String
  distributor   distributor? @relation(fields: [distributorId], references: [id])
  distributorId Int?

  @@index([distributorId])
}
