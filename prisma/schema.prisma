// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model User {
  id         Int          @id @default(autoincrement())
  email      String       @unique
  name       String?
  address    address[]
  management management[]
}

model household {
  id         Int          @id @default(autoincrement())
  name       String
  address    String
  management management[]

  storage_location storage_location[]
}

model management {
  id           Int       @id @default(autoincrement())
  user         User      @relation(fields: [userId], references: [id])
  house_hold   household @relation(fields: [house_holdId], references: [id])
  userId       Int
  house_holdId Int
  address      address[]

  @@index([house_holdId])
  @@index([userId])
}

model address {
  id Int @id @default(autoincrement())

  management   management? @relation(fields: [managementId], references: [id])
  managementId Int?
  User         User?       @relation(fields: [userId], references: [id])
  userId       Int?

  @@index([managementId])
  @@index([userId])
}

model storage_location {
  id           Int            @id @default(autoincrement())
  name         String
  address      String
  house_hold   household      @relation(fields: [house_holdId], references: [id])
  house_holdId Int
  stored_items stored_items[]

  @@index([house_holdId])
}

model stored_items {
  id                 Int              @id @default(autoincrement())
  name               String
  expiry_date        DateTime
  purchase_date      DateTime
  purchase_link      String
  image_url          String
  desired_quantity   Int
  quantity           Int
  storage_location   storage_location @relation(fields: [storage_locationId], references: [id])
  storage_locationId Int

  @@index([storage_locationId])
}
